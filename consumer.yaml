apiVersion: batch/v1
kind: Job
metadata:
  name: consumer
  labels:
    name: consumer
spec:
  parallelism: 10
  template:
    metadata:
      labels:
        name: consumer
    spec:
      containers:
      - name: consumer
        image: gcr.io/kubernetes-screen-173105/pipeline
        imagePullPolicy: Always
        env:
        - name: NODETYPE
          value: consumer
        - name: REDISLIST
          value: redis-list
        # Change this to your project ID.
        - name: PROJECT_ID
          value: kubernetes-screen-173105
        # Change the following two settings to your dataset and table.
        - name: BQ_DATASET
          value: database
        - name: BQ_TABLE
          value: values
      restartPolicy: OnFailure
